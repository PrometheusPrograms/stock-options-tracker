/* ============================================================================
   STOCK OPTIONS TRACKER - CUSTOM STYLES
   ============================================================================
   
   TABLE OF CONTENTS:
   
   1. CSS Variables (Base: colors, spacing, typography)
   2. Global Styles (Body, typography, utilities)
   3. Layout (Page wrapper, containers, responsive)
   4. Header Banner (Sticky banner, settings icon)
   5. Cards & Headers (Card components, compact variants)
   6. Sections (Dashboard, trades, cost basis borders)
   7. Modal Button Visibility (Form states)
   8. Components (Buttons, forms, tables, modals)
   9. Icons & Typography (Section titles, icons)
   10. Dashboard Controls (Filter controls, date inputs)
   11. Charts (Containers, legends, dimensions)
   12. Trades Table (Table styling, editable cells)
   13. Cost Basis (Summary table, filters)
   14. Colors & Gradients (Background variants)
   15. Responsive & Print (Media queries)
   
   ============================================================================
*/

/* ========= 1. CSS Variables ========= */
:root {
    /* Spacing Scale */
    --space-xs: 0.25rem;    /* 4px */
    --space-sm: 0.5rem;     /* 8px */
    --space-md: 1rem;       /* 16px */
    --space-lg: 1.5rem;     /* 24px */
    --space-xl: 2rem;       /* 32px */
    --space-xxl: 3rem;      /* 48px */
    
    /* Common spacing values found in app */
    --space-title: 15px;
    --space-header: 25px;
    --space-controls: 35px;
    
    /* Colors */
    --primary-color: #667eea;
    --primary-color-alt: #007bff;
    --primary-color-dark: #0056b3;
    --secondary-color: #764ba2;
    --accent-color: #f093fb;
    --success-color: #28a745;
    --success-color-dark: #1e7e34;
    --info-color: #17a2b8;
    --info-color-dark: #117a8b;
    --warning-color: #ffc107;
    --warning-color-dark: #e0a800;
    --danger-color: #dc3545;
    --light-color: #f8f9fa;
    --light-color-alt: #e9ecef;
    --dark-color: #212529;
    --background-color: #f5f7fa;
    
    /* Typography */
    --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* ========= 2. Global Styles ========= */
body {
    background-color: var(--background-color);
    font-family: var(--font-family);
}

/* ========= Spacing Scale Classes ========= */
/* Consistent spacing system - use these classes throughout */
.space-xs { margin-left: var(--space-xs); }
.space-sm { margin-left: var(--space-sm); }
.space-md { margin-left: var(--space-md); }
.space-lg { margin-left: var(--space-lg); }
.space-xl { margin-left: var(--space-xl); }
.space-xxl { margin-left: var(--space-xxl); }

/* Common spacing values */
.space-title { margin-left: var(--space-title); }
.space-header { margin-left: var(--space-header); }
.space-controls { margin-left: var(--space-controls); }

/* ========= 7. Modal Button Visibility ========= */
#btoForm.add-mode #bto-add-buttons,
#btoForm.add-mode #bto-add-cancel {
    display: flex;
}

#btoForm.add-mode #bto-edit-buttons {
    display: none;
}

#btoForm.edit-mode #bto-edit-buttons {
    display: flex;
}

#btoForm.edit-mode #bto-add-buttons,
#btoForm.edit-mode #bto-add-cancel {
    display: none;
}

#stcForm.add-mode #stc-add-buttons,
#stcForm.add-mode #stc-add-cancel {
    display: flex;
}

#stcForm.add-mode #stc-edit-buttons {
    display: none;
}

#stcForm.edit-mode #stc-edit-buttons {
    display: flex;
}

#stcForm.edit-mode #stc-add-buttons,
#stcForm.edit-mode #stc-add-cancel {
    display: none;
}

/* ========= 3. Layout ========= */
.page-wrapper {
    padding-left: 1.4rem; /* Reduced from 2rem (30% reduction) */
    padding-right: 1.4rem; /* Reduced from 2rem (30% reduction) */
    margin: 0 auto;
    width: 100%;
    background-color: white;
}

/* ========= 4. Header Banner ========= */
.header-banner {
    position: relative;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%) !important; /* Solid background to prevent transparency */
    color: white;
    padding: 1.4rem 0; /* Reduced from 2rem (30% reduction) */
    border-radius: 8px 8px 0 0; /* rounded top only when sticky */
    margin-bottom: 0; /* No margin - spacing controlled by section mt-5 */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Compact header banner variant */
.header-banner.compact {
    padding: 0.7rem 0; /* Reduced from 1rem (30% reduction) */
}

.header-banner-wrapper {
    position: sticky;
    top: 0;
    z-index: 999;
    padding-bottom: 0; /* No padding - control bar will sit right below */
    background-color: white;
    width: calc(100% + 20px);
    margin-left: -10px;
    margin-right: -10px;
}

/* ========= 5. Cards & Headers ========= */
.card {
    border-radius: 0.5rem;
    border: 1px solid rgba(0, 0, 0, 0.125);
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    transition: box-shadow 0.15s ease-in-out;
    animation: fadeIn 0.3s ease-in-out;
}

.card:hover {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.card-header {
    background-color: #fff;
    border-bottom: 1px solid rgba(0, 0, 0, 0.125);
    border-radius: 0.5rem 0.5rem 0 0;
    padding: 1.05rem 0.7rem; /* Reduced from 1.5rem 1rem (30% reduction) */
}

/* Compact header variant for tighter layouts */
.card-header.compact {
    padding: 0.525rem 0.7rem !important; /* Reduced from 0.75rem 1rem (30% reduction) */
}

/* ========= 6. Section Borders ========= */
#dashboard,
#trades,
#cost-basis {
    border: 1px solid rgba(0, 0, 0, 0.1);
}

/* Ensure dashboard card has proper top margin to avoid overlapping with sticky control bar */
/* Account for control bar height (padding 0.7rem top + 0.7rem bottom = 1.4rem) + margin-bottom (1.05rem) */
.container-fluid > .row.mb-5:first-of-type {
    margin-top: calc(1.4rem + 1.05rem) !important; /* Control bar padding + margin-bottom */
}

/* Ensure no border on body or page wrapper */
body {
    border: none;
}

.page-wrapper {
    border: none;
}

/* ========= Bootstrap Adjustments ========= */
.container,
.container-fluid {
    padding-left: 0;
    padding-right: 0;
}

.row {
    --bs-gutter-x: 0.7rem; /* Reduced from 1rem (30% reduction) */
}

/* ========= Responsive ========= */
@media (max-width: 768px) {
    .page-wrapper {
        padding-left: 1rem;
        padding-right: 1rem;
    }
}


/* Standard collapsible section toggle icon */
.section-toggle-icon {
    font-size: 1.05em; /* Reduced from 1.5em (30% reduction) */
}

/* Section header styling */
.dashboard-title,
.trades-title,
.cost-basis-title,
.test-title {
    font-size: 1.225em; /* Reduced from 1.75em (30% reduction) */
}

.dashboard-title i,
.trades-title i,
.cost-basis-title i,
.test-title i {
    font-size: 1.155em; /* Reduced from 1.65em (30% reduction) */
}

/* Middle align all elements in section headers */
.card-header .d-flex {
    align-items: center;
}

.card-header .d-flex > * {
    vertical-align: middle;
}

.card-header .form-control,
.card-header .btn,
.card-header .form-label {
    vertical-align: middle;
}

/* Specific alignment for dashboard controls - increased specificity */
.dashboard-controls.d-flex,
.dashboard-controls .d-flex {
    align-items: center;
}

.dashboard-controls .form-control-sm,
.dashboard-controls .btn-sm {
    height: auto;
    line-height: 1.5;
}

.dashboard-controls .form-label {
    margin-bottom: 0;
    line-height: 1.5;
}

/* Remove all padding from dashboard header controls with specific selectors */
.dashboard-controls .form-control,
.dashboard-controls .btn,
.dashboard-controls .form-label {
    padding: 0;
    margin: 0;
}

.dashboard-controls .me-1,
.dashboard-controls .me-2 {
    margin-right: 0.25rem;
}

.dashboard-controls .form-control-sm {
    padding: 0.175rem 0.35rem; /* Reduced from 0.25rem 0.5rem (30% reduction) */
}

.dashboard-controls .btn-sm {
    padding: 0.175rem 0.35rem; /* Reduced from 0.25rem 0.5rem (30% reduction) */
}

/* Section card component - reusable styles for all sections */
.section-card .card-header {
    display: flex;
    align-items: center;
    box-sizing: border-box;
}

.section-card .card-header .d-flex {
    align-items: center;
}

.section-card .card-header .d-flex > * {
    vertical-align: middle;
    align-self: center;
}

.section-card .card-header .form-control,
.section-card .card-header .btn,
.section-card .card-header .form-label,
.section-card .card-header h5,
.section-card .card-header i {
    vertical-align: middle;
    align-self: center;
}

/* Header group with consistent spacing using gap */
.header-group {
    display: flex;
    align-items: center;
    gap: 1.05rem; /* Reduced from 1.5rem (30% reduction) */
}

/* Legacy support for elements still using direct children */
.section-card .card-header .d-flex > div:not(:first-child),
.section-card .card-header .d-flex > *:not(:first-child) {
    margin-left: 0; /* gap handles spacing now */
}

.section-card .card-header .d-flex {
    gap: 1.05rem; /* Reduced from 1.5rem (30% reduction) */
}

/* Section titles - common styling */
.section-title {
    margin-left: 0;
}

.dashboard-date-input {
    width: 140px;
}

.chart-container {
    position: relative;
    height: 315px; /* Reduced from 450px (30% reduction) */
}

.sunburst-chart {
    width: 315px; /* Reduced from 450px (30% reduction) */
    height: 315px; /* Reduced from 450px (30% reduction) */
}

/* Make chart cards same height */
.row .col-6 .card {
    height: 100%;
}

.legend-item {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.legend-text {
    font-size: 0.75rem;
}

.legend-subtext {
    font-size: 0.65rem;
}

.legend-container {
    min-width: 120px;
}

/* Modal Components */
.modal-dialog-sm {
    max-width: 350px;
}

.modal-dropdown {
    position: relative;
}

.dropdown-suggestions {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid #dee2e6;
    border-radius: 0.375rem;
    background-color: white;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

/* Button States - using more specific selectors instead of !important */
.form-container.add-mode .add-buttons,
.modal-content .add-mode .add-buttons {
    display: flex;
}

.form-container.add-mode .edit-buttons,
.modal-content .add-mode .edit-buttons {
    display: none;
}

.form-container.edit-mode .edit-buttons,
.modal-content .edit-mode .edit-buttons {
    display: flex;
}

.form-container.edit-mode .add-buttons,
.modal-content .edit-mode .add-buttons {
    display: none;
}

/* Table Components */
.table-fixed {
    table-layout: fixed;
    /* width will be set dynamically by JavaScript */
}

.table-fixed td {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 0.35rem 0.525rem; /* Reduced from 0.5rem 0.75rem (30% reduction) */
    vertical-align: middle;
    text-align: center;
    border: 1px solid #dee2e6;
}

.table-fixed td:first-child:not(:empty) {
    text-align: left;
    font-weight: bold;
    background-color: var(--light-color);
}

/* Override for trades table - no ellipsis and white background for first column */
#trades-table-main.table-fixed td,
#trades-table-main .table-fixed td,
#trades-table-main td,
table#trades-table-main td,
table#trades-table-main.table-fixed td {
    overflow: visible !important;
    text-overflow: clip !important;
    white-space: normal !important;
}

#trades-table-main.table-fixed td:first-child:not(:empty),
#trades-table-main .table-fixed td:first-child:not(:empty),
#trades-table-main td:first-child:not(:empty),
#trades-table-main td:first-child,
table#trades-table-main td:first-child,
table#trades-table-main.table-fixed td:first-child {
    background-color: #ffffff !important;
    background: #ffffff !important;
}

/* Filter Components */
.filter-container {
    position: relative;
}

.filter-input {
    width: 200px;
}

.filter-suggestions {
    display: none;
    width: 300px;
}

.cost-basis-filter-suggestions {
    display: none;
}

.clear-button {
    display: none;
}

.clear-button.visible {
    display: inline-block;
}

/* Status Filter - inherit from trades table styling */
#trades .status-filter {
    width: 90px !important; /* More condensed width */
    font-size: 0.6125rem !important; /* Match trades table font size */
    padding: 0.1rem 0.5rem 0.1rem 0.75rem !important; /* Padding: top right bottom left - extra left for arrow, right for centering */
    height: auto !important;
    line-height: 1.1 !important;
    text-align: center !important; /* Center the text (excluding arrow) */
    text-align-last: center !important; /* Center the selected option text */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") !important; /* White arrow for header */
    background-repeat: no-repeat !important;
    background-position: left 0.25rem center !important; /* Left align the arrow */
    background-size: 0.5rem 0.5rem !important; /* Condensed arrow size */
    appearance: none !important; /* Remove default arrow */
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
}

/* Status filter label in trades header - inherit from trades table */
#trades .card-header .form-label {
    font-size: 0.6125rem !important; /* Match trades table font size */
    margin-bottom: 0 !important;
    line-height: 1.2 !important;
}

/* Ensure status dropdown in trades card header inherits trades table formatting */
#trades .card-header .status-filter,
#trades .card-header .form-select.status-filter {
    font-size: 0.6125rem !important; /* Match #trades-table-main font-size */
    padding: 0.1rem 0.5rem 0.1rem 0.75rem !important; /* Padding: top right bottom left - extra left for arrow, right for centering */
    height: auto !important;
    line-height: 1.1 !important;
    width: 90px !important; /* Match width */
    border: 1px solid rgba(255, 255, 255, 0.5) !important; /* More visible border for header */
    text-align: center !important; /* Center the text (excluding arrow) */
    text-align-last: center !important; /* Center the selected option text */
    background-color: rgba(255, 255, 255, 0.15) !important; /* Light background to stand out from header */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") !important; /* White arrow for header - thicker stroke */
    background-repeat: no-repeat !important;
    background-position: left 0.25rem center !important; /* Left align the arrow */
    background-size: 0.6rem 0.6rem !important; /* Slightly larger arrow size for visibility */
    color: white !important; /* White text for visibility on dark header */
    appearance: none !important; /* Remove default arrow */
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
}

/* Form select in card headers */
.card-header .form-select,
.card-header .form-select-sm {
    font-size: 0.6125rem !important; /* Match condensed layout */
    padding: 0.175rem 0.35rem !important; /* Match condensed layout */
    height: auto !important;
    line-height: 1.2 !important;
}

/* Override for status filter in header to match table cell styling */
#trades .card-header .status-filter,
#trades .card-header .form-select.status-filter {
    padding: 0.1rem 0.5rem 0.1rem 0.75rem !important; /* Override general form-select padding */
    line-height: 1.1 !important; /* Override general form-select line-height */
}

/* Status select dropdown in trades table - match condensed layout */
#trades-table-main .status-select,
#trades-table-main .form-select.status-select {
    font-size: 0.6125rem !important; /* Match trades table font size */
    padding: 0.1rem 0.5rem 0.1rem 0.75rem !important; /* Padding: top right bottom left - extra left for arrow, right for centering */
    height: auto !important;
    line-height: 1.1 !important;
    width: 100% !important;
    border: 1px solid #ced4da !important;
    text-align: center !important; /* Center the text (excluding arrow) */
    text-align-last: center !important; /* Center the selected option text */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M2 5l6 6 6-6'/%3e%3c/svg%3e") !important;
    background-repeat: no-repeat !important;
    background-position: left 0.25rem center !important; /* Left align the arrow */
    background-size: 0.5rem 0.5rem !important; /* Condensed arrow size */
    appearance: none !important; /* Remove default arrow */
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
}

/* Status dropdown options - condensed layout */
/* Consolidated rules for both header and table dropdowns */
/* Note: Native select elements have limited styling support for options */
#trades .status-filter option,
#trades-table-main .status-select option {
    font-size: 0.6125rem !important; /* Condensed font size */
    padding: 0.1rem 0.2rem !important; /* More condensed padding */
    text-align: center !important; /* Center the text in dropdown options */
    line-height: 1.2 !important; /* Condensed line height */
    height: auto !important;
    min-height: auto !important;
}

/* Header Components */
.header-settings-icon {
    cursor: pointer;
    font-size: 1.575rem; /* Reduced from 2.25rem (30% reduction) */
    margin-left: -49px; /* Reduced from -70px (30% reduction) */
}

/* Layout Containers - Updated for Bootstrap Grid */
/* Container styles now use Bootstrap grid in HTML */

/* Duplicate definitions removed - now defined at lines 121-138 */

/* Shadow Enhancements */
.shadow-sm {
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
}


.header-banner h1 {
    color: white;
    font-weight: 600;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    font-size: 1.4rem !important; /* Reduced from 2rem (30% reduction) */
}

.header-banner .btn {
    border-color: rgba(255, 255, 255, 0.3);
    color: white;
}

.header-banner .btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5);
    color: white;
}

/* Color Scheme */
:root {
    --primary-color: #667eea;
    --secondary-color: #764ba2;
    --accent-color: #f093fb;
    --success-color: #4facfe;
    --info-color: #00d4aa;
    --warning-color: #feca57;
    --danger-color: #ff6b6b;
    --light-color: #f8f9fa;
    --dark-color: #2c3e50;
}

/* Card background gradients - using CSS variables */
.card.bg-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)) !important;
    border: none;
}

.card.bg-success,
.card-header.bg-success {
    background: linear-gradient(135deg, var(--success-color), var(--info-color)) !important;
    border: none;
}

.card.bg-info,
.card-header.bg-info {
    background: linear-gradient(135deg, var(--info-color), var(--accent-color)) !important;
    border: none;
}

.card-header.bg-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)) !important;
}

.card-header.bg-light {
    background: linear-gradient(135deg, var(--light-color), var(--light-color-alt)) !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.125);
}

/* Update button colors */
.btn-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    border: none;
}

.btn-primary:hover {
    background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.btn-outline-primary {
    border-color: var(--primary-color);
    color: var(--primary-color);
}

.btn-outline-primary:hover {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
}

/* Dropdown Styling */
.dropdown-item {
    border-bottom: 1px solid var(--light-color);
    transition: background-color 0.15s ease-in-out;
}

.dropdown-item:hover {
    background-color: var(--light-color);
}

.dropdown-item:last-child {
    border-bottom: none;
}

/* Editable Cell Styling */
.editable-cell:focus {
    border-color: var(--primary-color);
    background-color: rgba(102, 126, 234, 0.1);
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    outline: none;
}

.editable-cell:hover {
    border-color: rgba(102, 126, 234, 0.3);
    background-color: rgba(102, 126, 234, 0.05);
}

/* Symbol Cards */
.symbol-card {
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.symbol-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    border-color: var(--primary-color);
}

.symbol-card {
    min-width: fit-content;
}

.symbol-card .card-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
    white-space: nowrap;
}

/* Icon Styling */
.fa-2x {
    font-size: 1.05em; /* Reduced from 1.5em (30% reduction) */
}

/* Button Enhancements */
.btn {
    border-radius: 0.375rem;
    transition: all 0.15s ease-in-out;
}

.btn:hover {
    transform: translateY(-1px);
}

.btn-sm {
    padding: 0.2625rem 0.525rem; /* Reduced from 0.375rem 0.75rem (30% reduction) */
    font-size: 0.6125rem; /* Reduced from 0.875rem (30% reduction) */
    border-radius: 0.25rem;
}

/* Form Styling */
.form-control {
    border-radius: 0.375rem;
    border: 1px solid #ced4da;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-control:focus {
    border-color: var(--primary-color-alt);
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

.form-select {
    border-radius: 0.375rem;
}

/* Header Styling */
h1 {
    color: var(--dark-color);
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Card Title Styling */
.card-title {
    font-weight: 600;
    color: var(--dark-color);
}

.card-header .card-title {
    color: inherit;
}

/* Clickable Symbols */
.clickable-symbol {
    cursor: pointer;
    color: var(--primary-color-alt);
    text-decoration: underline;
    transition: color 0.15s ease-in-out;
}

.clickable-symbol:hover {
    color: var(--primary-color-dark);
    text-decoration: none;
}

/* Disabled hover effect for trades table */
.table tbody tr:hover {
    background-color: transparent;
}

/* Alert Styling */
.alert {
    margin-bottom: 0;
    border-radius: 0.375rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}

/* Modal Styling */
.modal-content {
    border-radius: 0.5rem;
    box-shadow: 0 1rem 3rem rgba(0, 0, 0, 0.175);
}

/* Button Group Styling */
.btn-group .btn {
    border-radius: 0;
}

.btn-group .btn:first-child {
    border-top-left-radius: 0.375rem;
    border-bottom-left-radius: 0.375rem;
}

.btn-group .btn:last-child {
    border-top-right-radius: 0.375rem;
    border-bottom-right-radius: 0.375rem;
}

/* Active Filter Button Styling */
.btn-outline-primary.active {
    background-color: var(--primary-color-alt);
    border-color: var(--primary-color-alt);
    color: white;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

/* Commission Modal Styling */
#commission-modal .modal-body {
    padding: 1.5rem;
}

/* Chart Styling */
#premiumChart {
    width: 100% !important;
    height: 100% !important;
}

/* Cost Basis Table Styling */
#cost-basis-summary .table {
    border: 10px solid #dee2e6;
    border-radius: 0.5rem;
}

#cost-basis-summary .table th {
    border-top: none;
    font-weight: 600;
    font-size: 0.6125rem; /* Reduced from 0.875rem (30% reduction) */
    background-color: var(--light-color);
}

#cost-basis-summary .table td {
    font-size: 0.6125rem; /* Reduced from 0.875rem (30% reduction) */
    padding: 0.35rem 0.525rem; /* Reduced from 0.5rem 0.75rem (30% reduction) */
}

/* Cost Basis Table Borders */
#cost-basis-table-container .table,
#cost-basis-inline-container .table {
    border: 1px solid #dee2e6;
    border-collapse: separate;
    border-spacing: 0;
    font-size: 0.6125rem !important; /* Match trades table font size */
}

#cost-basis-table-container .table th,
#cost-basis-inline-container .table th {
    border: 1px solid #dee2e6;
    border-bottom: 2px solid #dee2e6;
}

#cost-basis-table-container .table td,
#cost-basis-inline-container .table td {
    border: 1px solid #dee2e6;
    font-size: 0.6125rem !important; /* Match trades table font size */
    padding: 0.35rem 0.525rem; /* Match trades table cell padding */
}

#cost-basis-table-container .table thead th,
#cost-basis-inline-container .table thead th {
    border-top: 1px solid #dee2e6;
    padding: 0.35rem 0.525rem; /* Match cost basis table cell padding for condensed layout */
    font-size: 0.6125rem; /* Match cost basis table cell font size */
}

/* Cost Basis Table Fixed Height - Show 10 rows (height set dynamically via JS) */
#cost-basis-table-container .table-responsive,
#cost-basis-inline-container .table-responsive {
    overflow-y: auto;
    overflow-x: auto;
}

/* Ensure table header stays visible when scrolling */
#cost-basis-table-container .table thead,
#cost-basis-inline-container .table thead {
    position: sticky;
    top: 0;
    z-index: 10;
    background-color: #212529; /* Match table-dark background */
}

/* Number Styling */
.text-danger {
    color: var(--danger-color) !important;
}

.text-success {
    color: var(--success-color) !important;
}

/* Custom Scrollbar */
.table-responsive::-webkit-scrollbar {
    height: 8px;
}

.table-responsive::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.table-responsive::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}

.table-responsive::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Trades Table Specific - Compact Layout */
#trades-table-main {
    font-size: 0.6125rem; /* Reduced from 0.875rem (30% reduction) */
    min-width: 800px; /* Force horizontal scrolling */
    width: auto !important; /* Let JavaScript set the width */
    max-width: none !important; /* Allow table to be as wide as needed */
    table-layout: fixed !important; /* Ensure fixed layout */
}

/* Ensure table container doesn't force table to stretch */
.table-responsive {
    overflow-x: auto;
    overflow-y: visible;
}

/* Prevent table from stretching in responsive container */
.table-responsive > .table-fixed {
    width: auto !important;
    min-width: auto !important;
}

/* Make first column sticky */
#trades-table-main thead th:first-child,
#trades-table-main tbody td:first-child,
table#trades-table-main thead th:first-child,
table#trades-table-main tbody td:first-child,
#trades-table-main.table thead th:first-child,
#trades-table-main.table tbody td:first-child,
#trades-table-main.table-sm thead th:first-child,
#trades-table-main.table-sm tbody td:first-child {
    position: sticky;
    left: 0;
    background-color: #ffffff !important;
    background: #ffffff !important;
    border-left: 1px solid #dee2e6 !important;
    border-right: 2px solid #dee2e6 !important;
    border-top: 1px solid #dee2e6 !important;
    border-bottom: 1px solid #dee2e6 !important;
    border-style: solid !important;
    z-index: 100 !important;
    box-shadow: 3px 0 8px rgba(0,0,0,0.15), 2px 0 0 0 #ffffff;
    isolation: isolate;
    overflow: visible !important;
}

#trades-table-main thead th:first-child,
table#trades-table-main thead th:first-child {
    z-index: 200 !important; /* Higher z-index for header */
    background-color: #ffffff !important;
    background: #ffffff !important;
    border-left: 1px solid #dee2e6 !important;
    border-right: 2px solid #dee2e6 !important;
    border-top: 1px solid #dee2e6 !important;
    border-bottom: 1px solid #dee2e6 !important;
    isolation: isolate;
}

/* Ensure first column cells are not transparent - multiple selectors for specificity */
#trades-table-main tbody tr td:first-child,
#trades-table-main tbody td:first-child,
table#trades-table-main tbody tr td:first-child,
table#trades-table-main tbody td:first-child,
#trades-table-main.table-fixed tbody td:first-child,
table#trades-table-main.table-fixed tbody td:first-child,
.trades-first-column,
#trades-table-main.table tbody tr td:first-child,
#trades-table-main.table-sm tbody tr td:first-child,
table#trades-table-main.table tbody tr td:first-child,
table#trades-table-main.table-sm tbody tr td:first-child,
#trades-table-main.table.table-fixed tbody tr td:first-child,
#trades-table-main.table.table-sm.table-fixed tbody tr td:first-child {
    background-color: #ffffff !important;
    background: #ffffff !important;
    border-left: 1px solid #dee2e6 !important;
    border-right: 2px solid #dee2e6 !important;
    border-top: 1px solid #dee2e6 !important;
    border-bottom: 1px solid #dee2e6 !important;
    border-style: solid !important;
    -webkit-border-image: none !important;
    -moz-border-image: none !important;
    border-image: none !important;
    z-index: 100 !important;
    isolation: isolate;
}

/* Make second column (spacer) sticky */
#trades-table-main tbody td.sticky-spacer-column {
    position: sticky;
    left: 105px; /* Width of first column */
    background-color: #f5f7fa !important;
    background: #f5f7fa !important;
    z-index: 9;
    box-shadow: 2px 0 5px rgba(0,0,0,0.1);
}

/* Ensure scrolling columns behind first column don't show their left borders */
#trades-table-main tbody td:not(:first-child):not(.sticky-spacer-column) {
    position: relative;
}

/* Override to ensure first column completely covers scrolling content */
/* Note: position: sticky is set in the main first column rule, don't override it here */

#trades-table-main tbody td:first-child::after {
    content: '';
    position: absolute;
    top: 0;
    right: -6px;
    bottom: 0;
    width: 6px;
    background-color: #ffffff;
    z-index: 101;
    pointer-events: none;
}

/* Remove ellipsis from date input fields - must be very specific */
#trades-table-main input[data-field="trade_date"],
#trades-table-main input[data-field="expiration_date"],
#trades-table-main input.no-ellipsis,
#trades-table-main td input[data-field="trade_date"],
#trades-table-main td input[data-field="expiration_date"],
table#trades-table-main input[data-field="trade_date"],
table#trades-table-main input[data-field="expiration_date"],
table#trades-table-main input.no-ellipsis,
table#trades-table-main td input[data-field="trade_date"],
table#trades-table-main td input[data-field="expiration_date"] {
    text-overflow: clip !important;
    overflow: visible !important;
    white-space: normal !important;
    -webkit-text-overflow: clip !important;
    -moz-text-overflow: clip !important;
    text-overflow: unset !important;
}

/* Remove ellipsis from all form controls in trades table - must override .table-fixed td */
#trades-table-main .form-control,
#trades-table-main td .form-control,
#trades-table-main input.form-control,
#trades-table-main td input.form-control,
table#trades-table-main .form-control,
table#trades-table-main td .form-control,
table#trades-table-main input.form-control,
table#trades-table-main td input.form-control {
    text-overflow: clip !important;
    overflow: visible !important;
    white-space: normal !important;
    -webkit-text-overflow: clip !important;
    -moz-text-overflow: clip !important;
    text-overflow: unset !important;
}

/* Compact padding for all cells */
#trades-table-main tr td:first-child {
    text-align: center;
    white-space: normal;
    word-wrap: break-word;
    vertical-align: middle;
    padding: 0.175rem 0.35rem; /* Reduced from 0.25rem 0.5rem (30% reduction) */
}

#trades-table-main tr:first-child td {
    white-space: normal;
    word-wrap: break-word;
    text-align: center;
    vertical-align: middle;
    padding: 0.175rem 0.35rem; /* Reduced from 0.25rem 0.5rem (30% reduction) */
}

#trades-table-main td {
    padding: 0.175rem 0.35rem !important; /* Reduced from 0.25rem 0.5rem (30% reduction) */
}

#trades-table-main .form-control {
    padding: 0.175rem 0.35rem; /* Reduced from 0.25rem 0.5rem (30% reduction) */
    font-size: 0.6125rem; /* Reduced from 0.875rem (30% reduction) */
}

/* Compact table container */
#trades .table-responsive {
    overflow-x: auto;
}

/* Compact header styling */
#trades-table-main thead th {
    padding: 0.175rem 0.35rem !important; /* Match trades table cell padding for consistency */
    font-size: 0.6125rem; /* Match cost basis table header font size for consistency */
    font-weight: 600;
    white-space: nowrap;
}

/* Responsive Design */
@media (max-width: 768px) {
    .container-fluid {
        padding: 0.5rem;
    }
    
    .card {
        margin-bottom: 1rem;
    }
    
    .table-responsive {
        font-size: 0.8rem;
    }
    
    .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.8rem;
    }
    
    .fa-2x {
        font-size: 1.25em;
    }
}

/* Animation */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Print Styles */
@media print {
    .btn, .form-control, .form-select {
        display: none !important;
    }
    
    .table {
        font-size: 0.8rem;
    }
    
    .card {
        border: 1px solid rgba(0, 0, 0, 0.1) !important;
        box-shadow: none !important;
    }
}

/* Ensure trades section content doesn't extend beyond header */
#trades .card-body {
    padding: 0.7rem !important; /* Reduced from 1rem (30% reduction) */
}

/* Ensure cost basis section content matches trades condensed layout */
#cost-basis .card-body {
    padding: 0.7rem !important; /* Match trades card body padding */
}

/* Condense cost basis ticker and summary card bodies */
#cost-basis .cost-basis-ticker-card .card-body,
#cost-basis .card.bg-light .card-body {
    padding: 0.35rem !important; /* Reduced from 0.5rem (30% reduction) */
}

/* Condense cost basis header card when ticker is selected */
#cost-basis .card.bg-light h6 {
    font-size: 0.49rem !important; /* Reduced from 0.7rem (30% reduction) */
}


/* Ensure trades and cost basis cards have same structure as dashboard */
#trades.card,
#cost-basis.card,
#test-trades-copy.card {
    width: 100% !important;
    max-width: 100% !important;
}

/* Ensure dashboard-content-container is full width */
.dashboard-content-container {
    width: 100% !important;
    max-width: 100% !important;
}



/* Standardize all section widths to match container-fluid */
.container-fluid > .row.mb-5 > .col-12 {
    max-width: 100% !important;
    width: 100% !important;
}


/* LEFT MARGIN SPACING: Bootstrap's default grid gutters create the left margin you like */
/* The col-12 class has padding-left and padding-right (usually 12px each) */
/* This is what creates the visual spacing on the left side */

/* Force all sections to exact same width by setting explicit width on the cards */
#dashboard.card,
#trades.card {
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Cost basis card needs 24px extra to match trades (parent col-12 issue) */
#cost-basis.card {
    width: calc(100% + 24px) !important;
    box-sizing: border-box !important;
    margin-right: 24px !important;
}




#cost-basis {
    width: 100% !important;
    max-width: 100% !important;
}

#test-trades-copy {
    width: 100% !important;
    max-width: 100% !important;
}

/* Make nested cards inside cost basis full width */
#cost-basis .card.shadow-sm {
    width: 100% !important;
    max-width: 100% !important;
}







#dashboard .card-header,
#trades .card-header,
#cost-basis .card-header {
    box-sizing: border-box;
    padding-left: 11.2px !important; /* Reduced from 16px (30% reduction) */
    padding-right: 11.2px !important; /* Reduced from 16px (30% reduction) */
    padding-top: 0.525rem !important; /* Match compact header vertical padding */
    padding-bottom: 0.525rem !important; /* Match compact header vertical padding */
}

#dashboard .card-header {
    padding-left: 11.2px !important; /* Reduced from 16px (30% reduction) */
    padding-right: 11.2px !important; /* Reduced from 16px (30% reduction) */
}
